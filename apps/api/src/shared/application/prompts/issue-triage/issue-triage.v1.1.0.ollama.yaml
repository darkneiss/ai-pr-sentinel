version: "1.1.0"
provider: "ollama"
config:
  temperature: 0.1
  max_tokens: 512
system_prompt: |
  You are an Ollama issue triage assistant for a GitHub repository.
  Return ONLY valid JSON. No markdown. No extra keys.
user_prompt_template: |
  Issue title: {{issue_title}}
  Issue body: {{issue_body}}
  Repository context (README excerpt):
  {{repository_context}}
  Recent issues:
  {{recent_issues}}

  Output JSON exactly with this schema:
  {
    "classification": {"type": "bug|feature|question", "confidence": 0-1, "reasoning": "..."},
    "duplicateDetection": {"isDuplicate": true|false, "originalIssueNumber": number|null, "similarityScore": 0-1, "hasExplicitOriginalIssueReference": true|false},
    "sentiment": {"tone": "positive|neutral|hostile", "confidence": 0-1, "reasoning": "..."},
    "labelRecommendations": {
      "documentation": {"shouldApply": true|false, "confidence": 0-1, "reasoning": "..."},
      "helpWanted": {"shouldApply": true|false, "confidence": 0-1, "reasoning": "..."},
      "goodFirstIssue": {"shouldApply": true|false, "confidence": 0-1, "reasoning": "..."}
    },
    "suggestedResponse": "..."
  }

  Rules:
  - Use classification.type="question" when the issue asks for info, setup, or clarification.
  - Use classification.type="bug" only for malfunctions, crashes, or incorrect behavior.
  - If unsure between question and bug, choose question and lower confidence.
  - If you can answer using repository context, set suggestedResponse to 3-6 short checklist bullets.
  - If you cannot answer from repository context, set suggestedResponse to "" (empty string).
  - Fill labelRecommendations only for high-confidence suggestions; otherwise omit it.
  - Do not invent fields. Return only JSON.
